master db pw:
cN16K5lHJ6dk9IMd


djangodevdbadmin
Pa55w0rd

project #: 275857742859
SQL connection: sodium-petal-335020:us-central1:django-dev-db

docker-compose run --rm app sh -c "django-admin startproject app ."
docker-compose run --rm app sh -c "python3 manage.py startapp ctapi"


.env.prod:

SECRET_KEY=7b94--dq^pg-raum#5(m+4c^1k6)t9d-szi-to)f6792*uc@ua
GS_BUCKET_NAME=django_dev_bucket
DATABASE_URL=postgres://djangodevdbadmin:Pa55w0rd@//cloudsql/sodium-petal-335020:us-central1:django-dev-db/djangodevdb

Set up GCP Secrets:

gcloud secrets create django_app_settings --replication-policy automatic
gcloud secrets versions add django_app_settings --data-file .env.prod

# Get the PROJECTNUM from your GCP project dashboard
gcloud secrets add-iam-policy-binding django_app_settings \
    --member serviceAccount:svc-app-dev@sodium-petal-335020.iam.gserviceaccount.com \
    --role roles/secretmanager.secretAccessor

Test secrets were created:

gcloud secrets describe django_app_settings

Migrations:

docker-compose run --rm app sh -c "python manage.py makemigrations"
docker-compose run --rm app sh -c "python manage.py migrate" 
docker-compose run --rm app sh -c "python manage.py collectstatic --no-input"
docker compose run --rm app sh -c "python manage.py createsuperuser --username=admin --email=psteele64@gmail.com"

Github repo:

https://github.com/psteele64/cat_track_gcp.git
